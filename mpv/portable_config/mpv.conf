#### mpv播放器设置 - ubuntu desktop Linux
#### 本配置用于探索Linux下的mpv
#### 对Linux了解很少，并且没有安装真机，因此目前处于探索阶段

### 常规*************************************************************************************************************************************

## 窗口
#ontop=yes #始终置顶（--Linux貌似暂无？）
border=yes #启用外部边框（--目前虚拟机ubuntu23.10下边框无效，原因不明，猜测是显卡驱动问题）
snap-window=yes #边缘吸附
keepaspect=yes #保持纵横比
geometry=50% #初始窗口尺寸：桌面分辨率的50%

## 屏显(osd)、屏控(osc)、播放
title=${?pause==yes:⏸}${?mute==yes:🔇}${?ontop==yes:📌}${?demuxer-via-network==yes:${media-title}}${?demuxer-via-network==no:${filename}} #标题栏显示的内容
osd-font-size=30 #屏显(osd)文字尺寸
osd-playing-msg="${filename}" #开始播放时短暂显示当前播放的文件名
osc=no #默认：yes。关闭内置默认屏控(osc)，使用水果屏控(osc)
no-input-default-bindings #关闭所有默认快捷键
#priority=high #高优先级（--Linux似乎不支持优先级）
keep-open=yes #播放结束后不退出
#save-position-on-quit #记忆播放(当前位置：~~/watch_later)
#watch-later-directory=~~/watch_later

## 缓存
cache=yes #开启缓存
cache-on-disk=no #用内存进行缓存而不是硬盘
gpu-shader-cache=yes #存储和加载已编译的GLSL着色器(当前位置：~~/cache)
gpu-shader-cache-dir=~~/cache

### 图形*************************************************************************************************************************************

## 解码(decode)
hwdec=no #CPU解码(软解)
#vd-lavc-threads=24 #默认：0(最高识别16线程)。CPU解码线程数：当前手动设置为24线程
vd-lavc-dr=yes #默认：auto。启用直接渲染，视频将直接解码到显存或暂存缓冲区，不回流到内存(关闭解码回流)
opengl-pbo=yes #启用PBOs(Opengl Pixel Buffer Object)

## 视频渲染器
vo=gpu-next #新版视频渲染器(libplacebo)
gpu-context=wayland #图形下文，真机推荐waylandvk
gpu-api=opengl #图形api，真机推荐vulkan，但虚拟机下不容易调用vulkan
## （--全屏独占貌似暂无？）

## 视频渲染器算法
#--------------------------------------------------------------------------------------------------------------------------------------------
#--最临近取样：nearest
#--双线性插值：bilinear
#--双立方插值：bicubic
#--双立方插值变体：厄米特：hermite
#--双立方插值变体2；米切尔：mitchell
#--双立方插值变体3；卡特姆_罗姆：catmull_rom
#--贝塞尔样条：spline36、spline64
#--------------------------------------------------------------------------------------------------------------------------------------------
#--贝塞尔辛克，严重振铃！：sinc
#--贝塞尔辛克加窗(椭圆加权平均)；兰索斯：lanczos
#--贝塞尔金克：jinc
#--贝塞尔金克加窗(椭圆加权平均)；椭圆加权平均兰索斯：ewa_lanczos
#--贝塞尔金克加窗(椭圆加权平均)柔化；椭圆加权平均兰索斯柔化：ewa_lanczossoft
#--贝塞尔金克加窗(椭圆加权平均)锐化；椭圆加权平均兰索斯锐化：ewa_lanczossharp
#--贝塞尔金克加窗(椭圆加权平均)加强锐化；椭圆加权平均兰索斯加强锐化：ewa_lanczos4sharpest
#--------------------------------------------------------------------------------------------------------------------------------------------
#--实际使用按先后排名推荐：ewa_lanczos、lanczos、jinc、spline64、spline36、catmull_rom、mitchell、hermite
#--更多算法可通过cmd输入mpv -scale=help命令查看
#--------------------------------------------------------------------------------------------------------------------------------------------
#色度升频：
deband=yes #抗色带
cscale=ewa_lanczos #色度升频：椭圆加权平均兰索斯(ewa_lanczos)
cscale-antiring=1.0 #色度升频抗震铃数值
glsl-shader="~~/shaders/KrigBilateral.glsl" #KrigBilateral色度升频着色器
#分辨率升频：
scale=ewa_lanczos #分辨率升频：椭圆加权平均兰索斯(ewa_lanczos)
scale-antiring=1.0 #分辨率升频抗震铃数值
linear-upscaling=no #禁止在分辨率升频时线性缩放亮度，sigmoid-upscaling前置条件
sigmoid-upscaling=yes #默认：yes。结形算法升频，抗振铃，需要linear-upscaling=no
glsl-shader="~~/shaders/nnedi3-nns32-win8x6.glsl" #NNEDI3分辨率升频着色器
#分辨率降频：
dscale=lanczos #分辨率降频：兰索斯(lanczos)
dscale-antiring=1.0 #分辨率降频抗震铃数值
correct-downscaling=yes #默认：yes。分辨率降频修正
linear-downscaling=no #禁止在分辨率降频时线性缩放亮度，SSIM的前置条件
glsl-shader="~~/shaders/SSimDownscaler.glsl" #SSIM分辨率降频着色器，需要linear-downscaling=no

## RGB输出范围
video-output-levels=full #全范围(0-255) - PC显示器

## （--色深输出精度，Linux暂无？）

## 色深抖动(抵抗色彩转换的损失)（--虚拟机Linux暂时使用默认色深抖动）
#dither-depth=auto #色深抖动开关
#dither=error-diffusion #色深抖动方式为：误差抖动(error-diffusion)，默认内核为sierra-lite
#error-diffusion=floyd-steinberg #设置误差抖动内核为：floyd-steinberg，效果最好，最消耗性能

## HDR映射SDR
hdr-contrast-recovery=0.30 #默认：0.0(禁用)。HDR对比度恢复强度：0.30(增强高亮细节)
allow-delayed-peak-detect=no #默认：yes。禁止延迟检测峰值亮度(高级渲染)
tone-mapping=bt.2446a #默认：auto。色调映射：bt.2446a(新版视频渲染器高质量映射)
gamut-mapping-mode=desaturate #默认：auto。色域映射模式：desaturate(去饱和)

## 全屏时HDR直通(需要提前开启系统HDR开关)
#target-colorspace-hint #新版视频渲染器专用

## 启用色彩管理
#icc-profile-auto

## 抗抖动平滑视频
#video-sync=display-resample #默认：video-sync=audio。抗抖动平滑视频，同步到显示器刷新率，interpolation的前置条件
#interpolation #抗抖动平滑视频，插补缺帧，需要video-sync=display*
#tscale=mitchell #默认：mitchell。抗抖动平滑视频，interpolation的具体算法

### 声音*************************************************************************************************************************************

## 音频渲染器
ao=pipewire #Linux下推荐的音频api：pipewire
#audio-exclusive=yes #声音设备独占

## 默认音量
volume=70

## 最大音量
volume-max=200

## 声道设置
ad-lavc-downmix=yes #默认:no。启用降混，对于PC最常用的2.0声道很有用，多声道PCM可设置其他声道组态
audio-channels=2.0 #常见备选声道组态：2.0,5.1,7.1，更多声道组态可通过cmd输入mpv --audio-channels=help命令查看
audio-normalize-downmix=yes #多声道降混规格化，规格化会导致降混后声音响度下降，不规格化会导致降混后各声道响度不均，如人声相对过小
#audio-spdif=ac3,dts,dts-hd,eac3,truehd #源码直通ac3,dts,dts-hd,eac3,truehd，支持SPDIF和HDMI

### 字幕*************************************************************************************************************************************

## 增强字幕自动拾取
sub-auto=fuzzy #mpv已内置此脚本

## 优先级选择中文、简体中文、繁体中文、英文、日文
slang=zh,Chinese,chi,chs,sc,zh-hans,zho,cht,tc,zh_hant,eng,en,enUS,en-US,English,jpn,jp,jap,Japanese

## 字幕样式
sub-font=黑体 #默认：sans-serif。字幕字体：黑体
sub-bold=yes #默认：no。使用粗体
sub-font-size=40 #默认：55。字幕尺寸：40
sub-border-size=1.5 #默认：3。字幕边框：1.5

## 字幕修正
#sub-ass-vsfilter-aspect-compat=no #默认：yes。应对特殊形状像素的视频
#sub-ass-vsfilter-blur-compat=no #默认：yes。由视频分辨率缩放blur标签

## 字幕同步视频流渲染
#blend-subtitles=video #旧版渲染器专用，新版视频渲染器无效。字幕与视频合并渲染，同步分辨率
